# URLマネージャー アプリ UI/UXデザイン提案

最終更新: 2025-09-22
担当: モバイルUI/UXデザイナー
対象プラットフォーム: iOS / Android（Flutter, Drift SQLite）
想定ユーザー: 情報収集・学習・業務で大量のリンクを扱う20〜40代のパワーユーザー

---

## 1. デザイン原則と体験ゴール
- **30秒で保存→理解→整理**できるテンポ。主要操作は片手で完結。
- **情報密度と可視性の両立**: 2行タイトル + メタ情報 + タグをカード内に収め、一覧で比較しやすくする。
- **オフライン完結感**: ネット不通時も保存・閲覧が継続できる安心感をUIとメッセージで伝達。
- **AI支援の透明性**: 要約・タグ提案は生成状態を明示し、失敗時のリトライを案内。
- **アクセシビリティ優先**: WCAG AA準拠、Dynamic Type対応、音声読み上げの順序設計。

---

## 2. ホーム画面（Home）

### 2.1 情報設計
1. **検索セクション**
   - 常時表示の検索バー（URL/タイトル/メモ全文）。検索アイコン + プレースホルダ「URL・タイトル・メモで検索」。
   - ステータスバッジ（未読件数）が右端に表示。
2. **フィルタチップ帯**
   - タグ / ドメイン / ステータス（未読・既読・スター・アーカイブ） / 保存期間（今日・今週・30日）を横スクロールで表示。
   - 選択状態はアクセントカラーのアウトライン + 塗り。
3. **KPIウィジェット群**
   - 今週保存数（棒グラフ）、未読数（ドットチャート）、重複候補（ステータスバッジ）を横スクロール可能な小カードで表示（高さ 88dp, 幅 160dp）。
4. **アイテム一覧**
   - 最小カード高さ 88dp、8dpグリッド。左: 56dpサムネ領域（OG画像/ドメインカラー）。右: タイトル（最大2行, 16sp, セミボールド）→ドメイン + 保存日時（12sp, ペアリング）→タグピル横スクロール（行数最大1）。
   - ステータスアイコン（スター/アーカイブ/未読バッジ）は右上角にまとめて表示。
5. **FAB「＋保存」**
   - クリップボードURL検出時にバッジ表示。「保存候補あり」ラベルを展開可能。

### 2.2 状態定義
- **通常**: 検索バー固定、スクロール時にフィルタチップは縮小（高さ48→40dp）。
- **検索アクティブ**: 背景が淡いブルーに変化、フィルタチップが検索結果に合わせて再構成（ヒット順）。
- **空状態（初回0件）**: KPIウィジェットの代わりにイラスト + 「共有メニューから1タップ保存」のステップ案内。
- **オフライン**: ステータスバー直下に「オフラインでも保存できます。メタデータは後で取得します。」のインフォバー（アイコン+テキスト）。
- **重複多発**: KPIカード「重複候補」が警告色（アンバー）で強調。タップで重複管理画面へ。

### 2.3 インタラクション
- スワイプ右: 背景がティール→濃ティールに変化、アイコンがスター→アーカイブに遷移。ハプティクスでしきい値通知。
- スワイプ左: 背景がグレー→レッド。タグ編集モーダル / 削除確認（アンドゥSnackbar）。
- カードタップ: 詳細ポップアップをモーダル表示（下記参照）。
- KPIカードタップ: 対応するフィルタを自動適用。
- FABタップ: 下からスライドインする「保存パネル」（クリップボード候補、URL手入力、QRスキャンボタン）。

---

## 3. 履歴画面（History）

### 3.1 情報設計
- セクションヘッダで年月日グルーピング。各日ごとに保存数バッジを表示。
- カードレイアウトはホームと共通だが、ステータス行に「操作履歴」（保存→既読→アーカイブ）を時系列でアイコン表示。
- 上部に期間フィルタ（本日/7日/30日/全期間）とアクティビティ種別フィルタ（保存/既読/共有/メモ）。

### 3.2 状態
- **大量保存時**: セクションヘッダがスクロールに追随（Sticky）。
- **フィルタ無結果**: イラスト + 文言「条件に一致する履歴がありません」。フィルタ解除ボタン。

### 3.3 インタラクション
- セクションヘッダタップでその日の統計モーダル表示（保存件数、平均読了時間など）。
- ロングプレスで複数選択モード（アーカイブ/削除/タグ付け一括）。

---

## 4. 詳細ポップアップ（モーダル）

### 4.1 レイアウト
- 表示方式: 90%高さのモーダルシート。スワイプダウンで閉じる。
- 上段: サムネイル（100%幅, 高さ180dp, 角丸16dp）。その下にタイトル18sp、ドメイン + 作成日/更新日。
- アクション列（横スクロール）: 内部で開く / 外部ブラウザ / コピー / 共有 / スター / アーカイブ。
- セクション:
  1. **AIサマリー**: 3〜5行表示、生成中はスケルトン + インジケータ。再生成ボタン。
  2. **メモ**: Markdown簡易エディタ、リンク自動検出。保存ボタン固定表示。
  3. **タグ**: チップリスト（候補 + 既存）。入力中はサジェストリストを下部に表示。
  4. **重複候補**: 類似タイトル/URLをカードで並べ、マージ/別扱い/削除選択肢。
  5. **アクティビティログ**（オプション）: 保存→要約→タグ付けのタイムライン。

### 4.2 状態
- **AI生成中**: プレースホルダアニメーション + 「AIサマリー生成中...」テキスト。中断ボタン。
- **生成失敗**: 赤系アラート + 再試行ボタン。「オフラインのため後で再試行します」メッセージ。
- **メモ未保存**: 下部にSnackbar「メモを保存しますか？」→保存/破棄。
- **タグなし**: 空状態に「タグで整理すると検索が楽になります」テキスト + 推奨タグチップ。

---

## 5. コンポーネント設計

| コンポーネント | サイズ/ルール | 振る舞い |
| --- | --- | --- |
| 検索バー | 高さ 56dp, 両端16dpパディング | フォーカス時に広がり、右端のステータスバッジがフェードアウト |
| フィルタチップ | 高さ 32dp, 角丸16dp, 8dp間隔 | 選択時に塗り潰し + チェックアイコン、長押しで詳細設定 |
| KPIカード | 160×88dp, 角丸16dp | タップで該当フィルタ、スクロールでシャドウ表示 |
| アイテムカード | 最小高さ88dp, 角丸16dp, 8dpグリッド | スワイプでアクション、ステータスアイコンを右上に重ね表示 |
| タグピル | 高さ24dp, 角丸12dp, テキスト12sp | 色 + アイコン（自動タグ=ロボットアイコン） |
| Snackbar | 高さ48dp, 16dpパディング | アンドゥボタンあり、下部タブ上に表示 |
| FAB | 56dp円形, アイコン+ラベル展開 | クリップボード検出時に点滅アニメーション |
| Bottom Tab | 高さ64dp, アイコン24dp + ラベル12sp | アクティブ時にラベル太字・下線 |
| モーダルシート | 16dp角丸, 8dpグリッド | スワイプダウン閉じ、背景ブラー |

---

## 6. レイアウトガイド
- **グリッド**: 8dpベース（カード内は4dp補助）。外側マージン16dp。
- **ブレークポイント**: スマホ幅（≤600dp）、タブレット（>600dp）でレイアウト変更。タブレットでは2列カード、フィルタチップは左サイドに固定。
- **テキスト最大行数**:
  - タイトル: 最大2行（省略は中黒「…」）
  - ドメイン+日時: 1行（`example.com · 3時間前`）
  - メモ抜粋（カード内表示時）: 最大2行、13sp。
- **省略ルール**: 長いURLは `example.com/…/detail` 形式。タグは 1行内に収まらない場合 `+3` バッジで示す。

---

## 7. カラースタイル & タイポグラフィ

### 7.1 グローバルトークン
| トークン | HEX | 用途 |
| --- | --- | --- |
| `Bg/Base` | #F5F7FB | 画面背景 |
| `Bg/Card` | #FFFFFF | カード背景 |
| `Accent/Primary` | #1E88E5 | 検索バーアクティブ、チップ選択、リンク |
| `Accent/Secondary` | #26A69A | スター/ポジティブアクション |
| `State/Warning` | #FFA726 | 重複警告、注意バナー |
| `State/Danger` | #E53935 | 削除、エラー |
| `Text/Primary` | #1A1C1E |
| `Text/Secondary` | #4A4F56 |
| `Text/Muted` | #6F7A85 |
| `Border` | #D8DEE6 |

タグピルはアクセントを基調としたパステルトーン（例: #B3E5FC, #C8E6C9, #FFE0B2, #E1BEE7）。必ずテキストラベル付き。

### 7.2 タイポ
- ベースフォント: iOSはSF Pro, AndroidはRoboto（Flutterで`Theme.of(context).platform`に応じて設定）。
- サイズ: タイトル18sp/16sp、本文14–16sp、メタ情報12–13sp。数字・バッジは12spボールド。
- 行間: タイトル1.3、本文1.4、メモエディタ1.5。

### 7.3 ダークモード指針
- 背景: #0F141A, カード: #1C242C。
- テキスト: 明度調整でコントラスト確保（Primary #E3E9F0）。
- アクセントカラーは彩度を落とし、背景とのコントラスト比 > 4.5:1 を維持。
- サムネイル枠は淡いグレー(#2C3A45)で、タグピルは彩度抑えたネオン調に調整。

---

## 8. アクセシビリティチェックリスト
- [x] 文字コントラスト: 本文4.5:1以上、見出し3:1以上。
- [x] タッチターゲット: カード全体・アイコンボタン44dp以上。
- [x] 音声読み上げ: カードのアクセシビリティラベル順序「タイトル → ドメイン → タグ数 → ステータス → 保存日時」。アクションアイコンは`Semantics`でラベル付与。
- [x] フォーカス順序: 検索バー → フィルタチップ → KPIカード → 一覧 → FAB。
- [x] 色依存回避: ステータスを色 + アイコン + ラベルで伝達。
- [x] Dynamic Type: テキストが拡大した際はカード高さが自動拡張し、要素が折り返しても情報が欠落しない。

---

## 9. モーションガイド
- **追加時**: FABタップ→保存処理完了で新カードがリスト上部に`Elevate-In`（0.25s）。未読バッジがカウントアップ（スケール+フェード）。
- **スワイプアクション**: 背景色が段階的に変化（0→50%→100%）。しきい値到達で軽いハプティック。完了時にアイコンがバウンス。
- **AIサマリー**: スケルトン（左右にフェードするグラデーション）→テキストにクロスフェード（0.3s）。
- **共有シート**: Bottom Sheetが下から0.3sでスライドイン。閉じる際は0.2sでスライドアウト + フェード。上書き/新規/スキップの選択肢は並列表示し、選択時に軽いハプティック。
- **KPI更新**: 週次保存数カードの棒グラフが高さアニメーション（0.4s）。

---

## 10. ユースケース別モック指針
- **初回0件**: ライトブルー背景のイラスト（手からURLカードが飛び込むイメージ）+ ステップバナー「1. 共有メニューを開く 2. URLマネージャーを選択 3. 保存完了」。FABを点滅で強調。
- **大量保存**: KPIカードをコンパクト表示（高さ72dp）に自動切替。セクションヘッダで「今日の保存」「過去7日」を区切り。
- **オフライン**: 画面上部にオフラインバー。カード内のOG画像が未取得の場合はドメインカラー背景 + Favicon表示。メタデータ未取得はタイトルの下に灰色テキストで「メタデータ取得待ち…」。
- **重複多発**: KPIカードをオレンジ点滅、一覧では重複カードをスタック表示（`2件の重複`ラベル）。モーダルでマージ動線を強調。

### エンプティ/エラーイラスト
- スタイル: ライン + パステル塗り。キャラクターはフクロウ（知識の象徴）で統一。
- エンプティ: フクロウがURLを眺めている。
- エラー: フクロウがケーブルを接続しようとしているイメージ + 再試行ボタン。

---

## 11. リポジトリ反映メモ
- `lib/features/home/`, `history/`, `detail/` のUI実装時に本仕様を参照し、Atomic Designコンポーネント（atoms: TagPill, molecules: ItemCard, organisms: ItemList）化。
- カラートークン・タイポは `shared/theme/` で`ThemeData`拡張、`ColorScheme`と`TextTheme`に落とし込む。
- モーションは `shared/widgets/animations/` として共通化。
- アクセシビリティ要件は`Semantics`ウィジェットを徹底し、テストで読み上げ順序を確認。

---

## 12. 次ステップ
1. Figmaで主要画面（Home, History, Detailモーダル, 共有シート）を制作し、インタラクションをプロトタイプ化。
2. Flutter実装ガイドライン（テーマ設定、ウィジェット構成）を設計書として追記。
3. ユーザーテスト（5名）で保存フローと検索フローの時間計測 → 調整。

